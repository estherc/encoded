// Generated by CoffeeScript 1.3.3
/*
ajax-chosen
A complement to the jQuery library Chosen that adds ajax autocomplete
Contributors:
https://github.com/jobvite/ajax-chosen
https://github.com/bicouy0/ajax-chosen
*/(function(){(function(e){return e.fn.ajaxChosen=function(t,n){var r,i,s,o,u,a,f,l,c=this;return s={minLength:3,queryLimit:10,delay:100,chosenOptions:{},searchingText:"Searching...",noresultsText:"No results.",initialQuery:!1},e.extend(s,t),s.chosenOptions.no_results_text=s.searchingText,l=this,a=l.attr("multiple")!=null,a?(u=".search-field > input",r=".chzn-choices"):(u=".chzn-search > input",r=".chzn-single"),l.find("option").length||l.append("<option>"),l.chosen(s.chosenOptions),i=l.next(".chzn-container"),o=i.find(u),s.initialQuery&&o.bind("focus",function(e){if(this.previousSearch||!i.hasClass("chzn-container-active"))return;return f(e)}),o.bind("keyup",function(e){return this.previousSearch&&clearTimeout(this.previousSearch),this.previousSearch=setTimeout(function(){return f(e)},s.delay)}),f=function(t){var r,i,u,f,h,p;return h=e.trim(o.attr("value")),u=(p=o.data("prevVal"))!=null?p:!1,o.data("prevVal",h),r=function(){var t;return a?t=o.parent().parent().siblings():t=o.parent().parent(),t.find(".no-results").html(s.noresultsText+" '"+e(c).attr("value")+"'")},h===u||h.length<s.minLength&&t.type==="keyup"?(r(),!1):(i=l.find("option"),s.term=h,f=function(n,r){var u,f,c,h,p,d,v,m,g,y,b,w;if(!o.is(":focus")&&t.type==="keyup")return;p=[],e.each(n,function(t,n){var r;return r=e("<option>"),r.attr("value",t).html(n),p.push(e(r))}),v=function(t){var n,r,i;n=e(t);if(n.attr("selected")&&a)return;if(n.attr("value")===""&&n.html()===""&&!a)return;i=function(){var e,t,i;i=[];for(e=0,t=p.length;e<t;e++)r=p[e],r.attr("value")===n.attr("value")&&i.push(r);return i}();if(i.length===0)return n.remove()};for(g=0,b=i.length;g<b;g++)u=i[g],v(u);i=l.find("option"),m=function(t){var n,r,s,o,u;r=!1,s=function(n){if(e(n).attr("value")===t.attr("value"))return r=!0};for(o=0,u=i.length;o<u;o++)n=i[o],s(n);if(!r)return l.append(t)};for(y=0,w=p.length;y<w;y++)h=p[y],m(h);c=o.val(),e.isEmptyObject(n)?(d=e("<option>"),d.addClass("no-results"),d.html(s.noresultsText+" '"+c+"'").attr("value",""),l.append(d)):l.change(),l.trigger("liszt:updated"),e(".no-results").removeClass("active-result"),o.val(c),e.isEmptyObject(n)||(f=e.Event("keydown"),f.which=40,o.trigger(f));if(r)return r(n)},n(s,f,t))}}})(jQuery)}).call(this);